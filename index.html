<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secrecy RPG</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="dialogo-styles.css">
    <link rel="stylesheet" href="historia-styles.css">
    <link rel="stylesheet" href="css/targeting.css">
    <link rel="stylesheet" href="css/mapa-campanha.css">
    <link rel="stylesheet" href="css/campanhas.css">
</head>

<body>

    <main id="aplicativo">
        <!-- Tela Inicial -->
        <section id="tela-inicial" class="tela ativa">
            <div class="container-titulo">
                <h1 class="titulo-jogo">Secrecy</h1>
                <p class="subtitulo-jogo">O destino aguarda</p>
            </div>
            <button id="botao-iniciar" class="botao-brilho">Iniciar Jogo</button>
        </section>

        <!-- Tela de Nome -->
        <section id="tela-nome" class="tela oculta">
            <div class="container-central">
                <h2 class="titulo-medieval">Como devemos cham√°-lo?</h2>
                <div class="caixa-entrada">
                    <input type="text" id="input-nome" placeholder="Digite seu nome..." maxlength="20">
                    <div class="linha-decorativa"></div>
                </div>
                <button id="botao-confirmar-nome" class="botao-brilho">Confirmar</button>
            </div>
        </section>

        <!-- Tela de Sele√ß√£o de Campanha -->
        <section id="tela-campanha" class="tela oculta">
            <h2 class="titulo-medieval">Selecione sua Jornada</h2>

            <div class="campanhas-container">
                <div class="card-campanha ativa" id="campanha-castelo">
                    <h3>A Retomada do Castelo</h3>
                    <div class="decoracao-card">
                        <img src="Images/Campanhas/Campanha1.png" alt="A Retomada do Castelo">
                    </div>
                    <p>Enfrente a tirania no cora√ß√£o do reino.</p>
                    <div class="tag-status">Iniciar Campanha</div>
                </div>

                <div class="card-campanha bloqueada">
                    <h3>As Terras de Fogo</h3>
                    <div class="correntes"></div>
                    <div class="decoracao-card">
                        <div class="emoji-decor">üåã</div>
                    </div>
                    <p>Em breve...</p>
                    <div class="tag-status">Bloqueado</div>
                </div>

                <div class="card-campanha bloqueada">
                    <h3>O Selo de Gelo</h3>
                    <div class="correntes"></div>
                    <div class="decoracao-card">
                        <div class="emoji-decor">‚ùÑÔ∏è</div>
                    </div>
                    <p>Em breve...</p>
                    <div class="tag-status">Bloqueado</div>
                </div>
            </div>

            <div class="controles-campanha">
                <button class="botao-brilho btn-voltar-inicio" onclick="UI.TrocarTela('tela-inicial')">
                    <span class="seta-voltar">?</span> Voltar ao Menu
                </button>
            </div>
        </section>

        <!-- Tela do Mapa da Campanha -->
        <section id="tela-mapa-campanha" class="tela oculta">
            <div class="mapa-wrapper">
                <div class="mapa-container">
                    <div class="moldura-medieval-titulo-mapa">
                        <h2 class="titulo-mapa-estilizado">A Retomada do Castelo</h2>
                    </div>
                    <div class="mapa-caminho">
                        <!-- Marcador do Jogador -->
                        <div id="marcador-jogador" class="marcador-jogador">
                            <img src="Images/Personagens/Jogador.png" alt="Her√≥i">
                        </div>

                        <!-- N√≠vel 1 -->
                        <div class="mapa-node ativo" id="node-1" onclick="Navigation.SelecionarFaseMapa(1)">
                            <img src="Images/Cenarios/C1F1_AldeiaHumana.png" alt="Fase 1" class="node-background">
                            <div class="node-icon">‚Ö†</div>
                            <div class="node-tooltip">Cap. 1: A Jornada</div>
                        </div>


                        <!-- N√≠vel 2 -->
                        <div class="mapa-node bloqueado" id="node-2" onclick="Navigation.SelecionarFaseMapa(2)">
                            <img src="Images/Cenarios/C1F2_Ponte.png" alt="Fase 2" class="node-background">
                            <div class="node-icon">‚Ö°</div>
                            <div class="node-tooltip">Cap. 2: Igvuld</div>
                        </div>


                        <!-- N√≠vel 3 -->
                        <div class="mapa-node bloqueado" id="node-3" onclick="Navigation.SelecionarFaseMapa(3)">
                            <img src="Images/Cenarios/C1F3_TerraDosOrcs.png" alt="Fase 3" class="node-background">
                            <div class="node-icon">‚Ö¢</div>
                            <div class="node-tooltip">Cap. 3: Lacaios</div>
                        </div>


                        <!-- N√≠vel 4 -->
                        <div class="mapa-node bloqueado" id="node-4" onclick="Navigation.SelecionarFaseMapa(4)">
                            <img src="Images/Cenarios/C1F4_Castelo.png" alt="Fase 4" class="node-background">
                            <div class="node-icon">‚Ö£</div>
                            <div class="node-tooltip">Cap. 4: Zirgur</div>
                        </div>


                        <!-- N√≠vel 5 -->
                        <div class="mapa-node bloqueado" id="node-5" onclick="Navigation.SelecionarFaseMapa(5)">
                            <img src="Images/Cenarios/C1F5_Passagem.png" alt="Fase 5" class="node-background">
                            <div class="node-icon">‚Ö§</div>
                            <div class="node-tooltip">Cap. 5: O Port√£o</div>
                        </div>


                        <!-- N√≠vel 6 -->
                        <div class="mapa-node bloqueado" id="node-6" onclick="Navigation.SelecionarFaseMapa(6)">
                            <img src="Images/Cenarios/C1F6_Castelo.png" alt="Fase 6" class="node-background">
                            <div class="node-icon">‚Ö•</div>
                            <div class="node-tooltip">Cap. 6: Durotan</div>
                        </div>

                        <div class="mapa-link"></div>

                        <!-- N√≠vel 7 -->
                        <div class="mapa-node bloqueado oculta" id="node-7" onclick="Navigation.SelecionarFaseMapa(7)">
                            <img src="Images/Cenarios/C1F7_Castelo.png" alt="Fase 7" class="node-background">
                            <div class="node-icon">‚Ö¶</div>
                            <div class="node-tooltip">Cap. 7: Gromn</div>
                        </div>

                        <!-- SVG para Linhas de Conex√£o -->
                        <svg class="mapa-conexoes" width="100%" height="100%"
                            style="position:absolute; top:0; left:0; pointer-events:none; z-index:1;">
                            <path id="path-conexoes" d="" fill="none" stroke="rgba(212, 175, 55, 0.4)" stroke-width="3"
                                stroke-dasharray="10, 10" />
                        </svg>
                    </div>
                </div>
            </div>
            <button class="botao-medieval btn-voltar-mapa" onclick="UI.TrocarTela('tela-campanha')">Voltar</button>
        </section>

        <!-- Tela de Narrativa/Hist√≥ria (Estilo Livro) -->
        <section id="tela-historia" class="tela oculta">
            <div class="livro-container">
                <div class="pagina-esquerda">
                    <h2 id="historia-titulo" class="titulo-capitulo">Cap√≠tulo I</h2>
                    <h3 id="historia-subtitulo" class="subtitulo-capitulo">O Castelo de Igvuld</h3>
                    <div class="separador-livro">‚ù¶</div>
                    <p id="historia-texto" class="texto-livro">
                        Lorem ipsum dolor sit amet...
                    </p>
                </div>
                <button id="btn-iniciar-historia" class="botao-livro">Virar P√°gina</button>
            </div>
        </section>

        <!-- Tela de Di√°logo Pr√©-Combate -->
        <section id="tela-dialogo-combate" class="tela oculta">
            <div class="dialogo-combate-container">
                <!-- Personagem Jogador (Esquerda) -->
                <div class="personagem-dialogo jogador-dialogo" id="personagem-jogador-dialogo">
                    <div class="avatar-dialogo" id="avatar-jogador-dialogo"></div>
                    <div class="balao-fala balao-jogador oculta" id="balao-jogador">
                        <div class="texto-balao"></div>
                        <div class="seta-balao"></div>
                    </div>
                </div>

                <!-- Divisor VS -->
                <div class="vs-dialogo">VS</div>

                <!-- Personagem Inimigo (Direita) -->
                <div class="personagem-dialogo inimigo-dialogo" id="personagem-inimigo-dialogo">
                    <div class="avatar-dialogo" id="avatar-inimigo-dialogo"></div>
                    <div class="balao-fala balao-inimigo oculta" id="balao-inimigo">
                        <div class="texto-balao"></div>
                        <div class="seta-balao"></div>
                    </div>
                </div>
            </div>

            <!-- Controles de Di√°logo -->
            <div class="controles-dialogo-bottom">
                <button class="botao-dialogo" id="btn-pular-dialogo">Pular Di√°logo</button>
                <button class="botao-dialogo botao-principal" id="btn-proximo-dialogo">Continuar</button>
            </div>
        </section>

        <!-- Tela de Vit√≥ria Comemorativa -->
        <section id="tela-vitoria" class="tela-especial oculta">
            <div class="vitoria-content">
                <h1 class="vitoria-titulo">Triunfo!</h1>
                <div class="vitoria-decoracao">‚öîÔ∏è</div>
                <p class="vitoria-subtitulo">O inimigo caiu, a justi√ßa prevalece.</p>
                <div class="vitoria-recompensas" id="vitoria-resumo">
                    <!-- Preenchido via JS -->
                </div>
                <button class="botao-brilho" id="btn-vitoria-continuar">Continuar Jornada</button>
            </div>
            <div id="particulas-vitoria"></div>
        </section>

        <!-- Menu de Talentos/Habilidades -->
        <section id="menu-talentos" class="tela-especial oculta">
            <div class="vitoria-content">
                <h2 class="vitoria-titulo" style="font-size: 3.5rem;">Aprimorar Talentos</h2>
                <p class="vitoria-subtitulo">Pontos dispon√≠veis: <span id="pontos-talento-valor">0</span></p>
                <div class="talentos-grid" id="grid-talentos">
                    <!-- Cards de talentos sorteados via JS -->
                </div>
                <p class="instrucao-talento">Escolha sabiamente para fortalecer seu her√≥i.</p>
            </div>
        </section>


        <!-- Tela de Jogo -->
        <section id="tela-jogo" class="tela oculta">
            <!-- Bot√£o de Configura√ß√µes (Apenas no Jogo/Combate) -->
            <button id="btn-config" class="btn-config-fixo" onclick="AbrirMenuConfig()">‚öôÔ∏è</button>

            <!-- Overlay de Di√°logo -->
            <div id="overlay-dialogo" class="oculta">
                <div class="caixa-dialogo">
                    <div class="personagem-dialogo-container">
                        <img id="img-personagem-dialogo" src="" alt="Personagem">
                        <div class="nome-dialogo" id="nome-personagem-dialogo"></div>
                    </div>
                    <div class="texto-dialogo-container">
                        <p id="texto-dialogo"></p>
                    </div>
                    <div class="controles-dialogo">
                        <button id="botao-avancar-dialogo" class="botao-acao">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- Interface Principal Superior (HUDs e Arena) -->
            <!-- Painel de Log de Combate (Fixo no Topo) -->
            <div id="painel-log-combate" class="painel-log-combate">
                <div class="cabecalho-log">
                    <span class="titulo-log">Relat√≥rio de Batalha</span>
                    <button id="btn-detalhes-log" class="btn-detalhes-log">Ver Tudo</button>
                </div>
                <div id="lista-log-recente" class="lista-log-recente">
                    <!-- Itens ser√£o inseridos via JS -->
                    <div class="item-log sistema">Batalha iniciada...</div>
                </div>
            </div>

            <!-- Modal de Log Completo (Oculto por padr√£o) -->
            <div id="modal-log-completo" class="modal-overlay oculta">
                <div class="modal-conteudo modal-log-conteudo">
                    <div class="modal-header">
                        <h2 style="color: var(--cor-destaque);">Registro Completo de Combate</h2>
                        <button class="botao-fechar" onclick="UI.FecharModal('modal-log-completo')">&times;</button>
                    </div>
                    <div id="conteudo-log-completo" class="log-scroll">
                        <!-- Lista completa inserida via JS -->
                    </div>
                </div>
            </div>

            <div class="layout-combate">
                <!-- Status do Jogador (Esquerda) -->
                <div class="status-jogador painel-lateral esquerda">
                    <div class="nome-hud-container">
                        <h3 class="nome-hud text-truncate">Cavaleiros</h3>
                        <button class="botao-info-stats" data-alvo="jogador">‚ñ∂</button>
                    </div>
                    <!-- Container de Efeitos -->
                    <div id="efeitos-jogador" class="efeitos-ativos-hud"></div>

                    <!-- Barras (Primeiro) -->
                    <div class="recipiente-barra-status">
                        <div class="rotulo-status">
                            Vida
                            <span id="indicador-dano-jogador" class="indicador-flutuante"></span>
                            <span class="valor-status" id="texto-vida-jogador">100/100</span>
                        </div>
                        <div class="barra-status vida">
                            <div class="preenchimento-barra" id="barra-vida-jogador" style="width: 100%;"></div>
                        </div>
                    </div>
                    <div class="recipiente-barra-status">
                        <div class="rotulo-status">Energia <span class="valor-status"
                                id="texto-energia-jogador">50/50</span></div>
                        <div class="barra-status energia">
                            <div class="preenchimento-barra" id="barra-energia-jogador" style="width: 100%;"></div>
                        </div>
                    </div>
                    <div class="recipiente-barra-status">
                        <div class="rotulo-status">Mana <span class="valor-status" id="texto-mana-jogador">30/30</span>
                        </div>
                        <div class="barra-status mana">
                            <div class="preenchimento-barra" id="barra-mana-jogador" style="width: 100%;"></div>
                        </div>
                    </div>

                    <!-- Novo Grid de Atributos -->
                    <div class="grid-atributos">
                        <div class="card-atributo" id="card-ataque-jogador">
                            <span class="icone-atrib">‚öîÔ∏è</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib" id="label-ataque-jogador">ATK</span>
                                <div class="valores-atrib">
                                    <span class="valor-base" id="atk-jogador-base">--</span>
                                    <span class="valor-atual" id="atk-jogador">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-atributo">
                            <span class="icone-atrib">üõ°Ô∏è</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib">DEF</span>
                                <div class="valores-atrib">
                                    <span class="valor-atual" id="def-jogador">--</span>
                                    <span class="valor-extra" id="def-jogador-pct">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-atributo">
                            <span class="icone-atrib">üí™</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib">VIG</span>
                                <div class="valores-atrib">
                                    <span class="valor-atual" id="vigor-jogador">--</span>
                                    <span class="valor-extra" id="vigor-jogador-pct">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-atributo">
                            <span class="icone-atrib">ü©∏</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib">ROUBO</span>
                                <div class="valores-atrib">
                                    <span class="valor-atual" id="roubo-jogador">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-atributo">
                            <span class="icone-atrib">üéØ</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib">CRIT</span>
                                <div class="valores-atrib">
                                    <span class="valor-atual" id="crit-jogador">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-atributo" id="card-pen-jogador">
                            <span class="icone-atrib">üóùÔ∏è</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib" id="label-pen-jogador">PEN</span>
                                <div class="valores-atrib">
                                    <span class="valor-atual" id="pen-jogador-abs">--</span>
                                    <span class="valor-extra" id="pen-jogador-pct">--</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Caixa de Determina√ß√£o Exclusiva -->
                    <div class="caixa-determinacao">
                        <div class="det-header">
                            <span class="icone-atrib">‚ú®</span>
                            <span class="label-atrib">DETERMINA√á√ÉO</span>
                        </div>
                        <div class="det-valor-container">
                            <span id="det-jogador">--</span>
                            <span class="det-max">/ <span id="det-max-jogador">200</span></span>
                        </div>
                    </div>
                </div>

                <!-- Arena (Centro) -->
                <div class="arena">
                    <div class="time time-jogadores">
                        <div class="personagem-container">
                            <div class="personagem jogador lateral" id="jogador-2">
                                <div class="visual-personagem visual-jogador">
                                    <div class="indicador-flutuante" id="indicador-dano-jogador-2"></div>
                                </div>
                                <div class="nome-personagem">Aliado 1</div>
                            </div>
                            <div class="personagem jogador principal" id="jogador-1">
                                <div class="visual-personagem visual-jogador">
                                    <div class="indicador-flutuante" id="indicador-dano-jogador-1"></div>
                                </div>
                                <div class="nome-personagem">Voc√™</div>
                            </div>
                            <div class="personagem jogador lateral" id="jogador-3">
                                <div class="visual-personagem visual-jogador">
                                    <div class="indicador-flutuante" id="indicador-dano-jogador-3"></div>
                                </div>
                                <div class="nome-personagem">Aliado 2</div>
                            </div>
                        </div>
                    </div>

                    <div class="divisor-versus">VS</div>

                    <div class="time time-inimigos">
                        <div class="personagem-container">
                            <div class="personagem inimigo lateral" id="inimigo-2">
                                <div class="visual-personagem visual-inimigo">
                                    <div class="indicador-flutuante" id="indicador-dano-inimigo-2"></div>
                                </div>
                                <div class="nome-personagem">Inimigo 2</div>
                            </div>
                            <div class="personagem inimigo principal" id="inimigo-1">
                                <div class="visual-personagem visual-inimigo">
                                    <div class="indicador-flutuante" id="indicador-dano-inimigo-1"></div>
                                </div>
                                <div class="nome-personagem">Inimigo Principal</div>
                            </div>
                            <div class="personagem inimigo lateral" id="inimigo-3">
                                <div class="visual-personagem visual-inimigo">
                                    <div class="indicador-flutuante" id="indicador-dano-inimigo-3"></div>
                                </div>
                                <div class="nome-personagem">Inimigo 3</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Status do Inimigo (Direita) -->
                <div class="status-inimigo painel-lateral direita" id="status-inimigo">
                    <div class="nome-hud-container">
                        <button class="botao-info-stats" data-alvo="inimigo">‚óÄ</button>
                        <h3 class="nome-hud text-truncate" id="nome-inimigo-hud">Inimigo</h3>
                    </div>
                    <!-- Container de Efeitos -->
                    <div id="efeitos-inimigo" class="efeitos-ativos-hud"></div>

                    <!-- Barras (Primeiro) -->
                    <div class="recipiente-barra-status">
                        <div class="rotulo-status">
                            Vida
                            <span id="indicador-dano-inimigo" class="indicador-flutuante"></span>
                            <span class="valor-status" id="texto-vida-inimigo">100/100</span>
                        </div>
                        <div class="barra-status vida">
                            <div class="preenchimento-barra" id="barra-vida-inimigo" style="width: 100%;"></div>
                        </div>
                    </div>
                    <div class="recipiente-barra-status">
                        <div class="rotulo-status">Energia <span class="valor-status"
                                id="texto-energia-inimigo">50/50</span></div>
                        <div class="barra-status energia">
                            <div class="preenchimento-barra" id="barra-energia-inimigo" style="width: 100%;"></div>
                        </div>
                    </div>
                    <div class="recipiente-barra-status">
                        <div class="rotulo-status">Mana <span class="valor-status" id="texto-mana-inimigo">30/30</span>
                        </div>
                        <div class="barra-status mana">
                            <div class="preenchimento-barra" id="barra-mana-inimigo" style="width: 100%;"></div>
                        </div>
                    </div>

                    <!-- Novo Grid de Atributos Inimigo -->
                    <div class="grid-atributos">
                        <div class="card-atributo">
                            <span class="icone-atrib">‚öîÔ∏è</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib">ATK</span>
                                <div class="valores-atrib">
                                    <span class="valor-atual" id="atk-inimigo">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-atributo">
                            <span class="icone-atrib">üõ°Ô∏è</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib">DEF</span>
                                <div class="valores-atrib">
                                    <span id="def-inimigo">--</span>
                                    <span class="valor-extra" id="def-inimigo-pct">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-atributo">
                            <span class="icone-atrib">üí™</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib">VIG</span>
                                <div class="valores-atrib">
                                    <span id="vigor-inimigo">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-atributo">
                            <span class="icone-atrib">ü©∏</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib">ROUBO</span>
                                <div class="valores-atrib">
                                    <span id="roubo-inimigo">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-atributo">
                            <span class="icone-atrib">üéØ</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib">CRIT</span>
                                <div class="valores-atrib">
                                    <span id="crit-inimigo">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-atributo">
                            <span class="icone-atrib">üóùÔ∏è</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib">PEN</span>
                                <div class="valores-atrib">
                                    <span id="pen-inimigo-abs">--</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="caixa-determinacao">
                        <div class="det-header">
                            <span class="icone-atrib">‚ú®</span>
                            <span class="label-atrib">DETERMINA√á√ÉO</span>
                        </div>
                        <div class="det-valor-container">
                            <span id="det-inimigo">--</span>
                        </div>
                    </div>
                </div>
            </div>


            <div class="controles">
                <button class="botao-acao atacar" id="btn-acao-atacar"
                    onclick="window.SistemaCombate.ClicarAtacar()">Atacar</button>
                <button class="botao-acao habilidade" id="btn-acao-habilidade"
                    onclick="window.SistemaCombate.ClicarHabilidade()">Habilidades</button>
                <button class="botao-acao descansar" data-acao="passar-turno"
                    onclick="window.SistemaCombate.PassarTurno()">Passar Turno</button>
                <button class="botao-acao mochila"
                    onclick="window.GerenciadorInterface.AbrirInventario()">Mochila</button>
            </div>

            <!-- Display de Mensagens Centralizado -->
            <div id="display-mensagens" class="display-mensagens oculta">
                <p id="texto-mensagem"></p>
            </div>
        </section>
    </main>

    <!-- Modais (Fora do main para evitar conflitos de posicionamento) -->

    <!-- Modal de Atributos Detalhados -->
    <div id="modal-atributos" class="modal-overlay oculta">
        <div class="modal-conteudo modal-pequeno">
            <div class="modal-header">
                <h2 id="titulo-modal-atributos">Atributos</h2>
                <button class="botao-fechar" onclick="FecharDetalhesAtributos()">&times;</button>
            </div>
            <div class="modal-body-atributos">
                <div id="imagem-atributo-destaque" class="imagem-atributo-destaque"></div>
                <div id="lista-atributos-detalhada" class="grid-atributos-detalhada">
                    <!-- Preenchido via JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal do Baralho -->
    <div id="modal-baralho" class="modal-overlay oculta">
        <div class="modal-conteudo">
            <div class="modal-header">
                <h2>Seu Baralho (20 Cartas)</h2>
                <button class="botao-fechar" onclick="FecharModalBaralho()">&times;</button>
            </div>
            <div id="deck-grid" class="deck-grid">
                <!-- Cartas em miniatura aqui -->
            </div>
        </div>
    </div>

    <!-- Modal do Invent√°rio -->
    <div id="modal-inventario" class="modal-overlay oculta">
        <div class="modal-conteudo modal-medio">
            <div class="modal-header">
                <h2>Invent√°rio</h2>
                <button class="botao-fechar" onclick="UI.FecharInventario()">&times;</button>
            </div>
            <div class="inventario-layout">
                <div class="inventario-mochila-container">
                    <img src="Images/√¨cones/12.png" alt="Mochila" class="img-mochila">
                </div>
                <div class="inventario-grid" id="grid-inventario">
                    <!-- Gerado via JS -->
                </div>
            </div>
            <div class="inventario-detalhes" id="inventario-detalhes">
                <p class="placeholder">Selecione um item para ver detalhes.</p>
            </div>
        </div>
    </div>

    <!-- Modal de Configura√ß√µes -->
    <div id="modal-config" class="modal-overlay oculta">
        <div class="modal-conteudo modal-pequeno">
            <div class="modal-header">
                <h2>Configura√ß√µes</h2>
                <button class="botao-fechar" onclick="FecharMenuConfig()">&times;</button>
            </div>
            <div class="menu-config-lista">
                <button class="btn-config-item" onclick="FecharMenuConfig()">Retomar Jogo</button>
                <button class="btn-config-item" onclick="AbrirBaralhoViaConfig()">Mostrar Baralho</button>
                <button class="btn-config-item btn-perigo" onclick="MenuDesistir()">Desistir</button>
                <button class="btn-config-item" id="btn-audio-toggle" onclick="ToggleAudio()">Desabilitar
                    √Åudio</button>
                <button class="btn-config-item btn-sair" onclick="FecharPrograma()">Fechar Programa</button>
            </div>
        </div>
    </div>

    <!-- Modal de Detalhes do Item (Confirma√ß√£o de Uso) -->
    <div id="modal-item-detalhe" class="modal-overlay oculta">
        <div class="modal-conteudo modal-pequeno">
            <div class="modal-header">
                <h2 id="item-detalhe-nome">Nome do Item</h2>
                <button class="botao-fechar" onclick="UI.FecharModal('modal-item-detalhe')">&times;</button>
            </div>
            <div class="item-detalhe-corpo">
                <div class="item-detalhe-imagem-container">
                    <img id="item-detalhe-imagem" src="" alt="Item">
                </div>
                <p id="item-detalhe-descricao" class="item-detalhe-texto">Descri√ß√£o do efeito do item aqui.</p>
            </div>
            <div class="item-detalhe-controles">
                <button class="botao-acao btn-cancelar" onclick="UI.FecharModal('modal-item-detalhe')">Cancelar</button>
                <button id="btn-confirmar-uso-item" class="botao-acao btn-confirmar">Utilizar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Efeitos Ativos -->
    <div id="modal-efeitos" class="modal-overlay oculta">
        <div class="modal-conteudo modal-pequeno">
            <div class="modal-header">
                <h2 id="titulo-modal-efeitos">Efeitos Ativos</h2>
                <button class="botao-fechar" onclick="UI.FecharMenuEfeitos()">&times;</button>
            </div>
            <div id="lista-efeitos-detalhada" class="lista-efeitos-detalhada">
                <!-- Preenchido via JS -->
            </div>
        </div>
    </div>

    <!-- Overlay de Sele√ß√£o de Cartas (Atacar/Habilidades) -->
    <!-- Overlay de Sele√ß√£o de Cartas (Simplificado) -->
    <div id="container-cartas" class="overlay-cartas oculta">
        <!-- T√≠tulo Removido, foco total nas cartas -->
        <div id="cartas-wrapper-overlay" class="cartas-wrapper-simples">
            <!-- Preenchido via JS -->
        </div>
        <button class="botao-cancelar-cartas"
            onclick="window.GerenciadorInterface.FecharSelecaoCartas()">Cancelar</button>
    </div>

    <!-- NOVO: Modal de Detalhes da Fase (Mapa da Campanha) -->
    <div id="modal-detalhes-fase" class="modal-overlay oculta">
        <div class="modal-conteudo modal-fase">
            <div class="modal-header">
                <h2 id="fase-detalhe-titulo">Cap√≠tulo X</h2>
                <button class="botao-fechar" onclick="UI.FecharModal('modal-detalhes-fase')">&times;</button>
            </div>
            <div class="fase-detalhe-corpo">
                <div class="fase-imagem-container">
                    <img id="fase-detalhe-imagem" src="" alt="Cen√°rio da Fase">
                </div>
                <div class="fase-info-container">
                    <h3 id="fase-detalhe-subtitulo">Subt√≠tulo da Fase</h3>
                    <p id="fase-detalhe-descricao">Contextualiza√ß√£o da fase aqui...</p>
                </div>
            </div>
            <div class="fase-detalhe-controles">
                <button class="botao-acao btn-cancelar"
                    onclick="UI.FecharModal('modal-detalhes-fase')">Cancelar</button>
                <button id="btn-confirmar-luta" class="botao-acao btn-lutar">LUTAR</button>
            </div>
        </div>
    </div>

    <!-- Arquivos do Sistema Refatorado (Ordem Importa) -->
    <!-- 1. Dados e Estado -->
    <script src="js/sistema/banco_de_dados.js"></script>
    <script src="js/sistema/estado_jogo.js"></script>
    <script src="js/utilitarios/uteis.js"></script>

    <!-- 2. M√≥dulos Independentes -->
    <script src="js/modulos/gerenciador_audio.js"></script>
    <script src="js/modulos/gerenciador_interface.js"></script>

    <!-- 3. Subsistemas de Regra -->
    <script src="js/sistema/sistema_efeitos.js"></script>
    <script src="js/sistema/sistema_mira.js"></script>
    <script src="js/sistema/sistema_inventario.js"></script>
    <script src="js/sistema/sistema_dialogo.js"></script>
    <script src="js/sistema/sistema_navegacao.js"></script>

    <!-- 4. L√≥gica de Jogo -->
    <script src="js/sistema/sistema_combate.js"></script>

    <!-- 5. Entry Point -->
    <script src="js/main.js"></script>
</body>

</html>