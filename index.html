<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secrecy RPG</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="dialogo-styles.css">
    <link rel="stylesheet" href="historia-styles.css">
    <link rel="stylesheet" href="css/targeting.css">
    <link rel="stylesheet" href="css/mapa-campanha.css">
    <link rel="stylesheet" href="css/campanhas.css">
</head>

<body>

    <main id="aplicativo">
        <!-- Tela Inicial -->
        <section id="tela-inicial" class="tela ativa">
            <div class="container-titulo">
                <h1 class="titulo-jogo">Secrecy</h1>
                <p class="subtitulo-jogo">O destino aguarda</p>
            </div>
            <button id="botao-iniciar" class="botao-brilho">Iniciar Jogo</button>
        </section>

        <!-- Tela de Nome -->
        <section id="tela-nome" class="tela oculta">
            <div class="container-central">
                <h2 class="titulo-medieval">Como devemos cham√°-lo?</h2>
                <div class="caixa-entrada">
                    <input type="text" id="input-nome" placeholder="Digite seu nome..." maxlength="20">
                    <div class="linha-decorativa"></div>
                </div>
                <button id="botao-confirmar-nome" class="botao-brilho">Confirmar</button>
            </div>
        </section>

        <!-- Tela de Sele√ß√£o de Campanha -->
        <section id="tela-campanha" class="tela oculta">
            <h2 class="titulo-medieval">Selecione sua Jornada</h2>
            <!-- Container Fullscreen removido pois o mapa foi removido -->
            <div class="campanhas-container">
                <div class="card-campanha ativa" id="campanha-castelo">
                    <div class="decoracao-card">
                        <img src="Images/Campanhas/CampanhaDoCastelo.png" alt="O Castelo de Igvuld">
                    </div>
                    <h3>O Castelo de Igvuld</h3>
                    <p>Enfrente a tirania no cora√ß√£o do reino.</p>
                    <div class="tag-status">Dispon√≠vel</div>
                </div>

                <div class="card-campanha bloqueada">
                    <div class="correntes">‚õìÔ∏è</div>
                    <div class="decoracao-card">üåã</div>
                    <h3>As Terras de Fogo</h3>
                    <p>Em breve...</p>
                    <div class="tag-status">Bloqueado</div>
                </div>

                <div class="card-campanha bloqueada">
                    <div class="correntes">‚õìÔ∏è</div>
                    <div class="decoracao-card">‚ùÑÔ∏è</div>
                    <h3>O Selo de Gelo</h3>
                    <p>Em breve...</p>
                    <div class="tag-status">Bloqueado</div>
                </div>
            </div>
        </section>

        <!-- Tela do Mapa da Campanha -->
        <section id="tela-mapa-campanha" class="tela oculta">
            <h2 class="titulo-medieval">Mapa da Jornada</h2>
            <div class="mapa-wrapper">
                <div class="mapa-container">
                    <div class="mapa-caminho">
                        <!-- Marcador do Jogador -->
                        <div id="marcador-jogador" class="marcador-jogador">
                            <img src="Images/Personagens/Jogador.png" alt="Her√≥i">
                        </div>

                        <!-- N√≠vel 1 -->
                        <div class="mapa-node ativo" id="node-1" onclick="Navigation.SelecionarFaseMapa(1)">
                            <div class="node-icon">‚Ö†</div>
                            <div class="node-tooltip">Cap. 1: A Jornada</div>
                        </div>

                        <div class="mapa-link"></div>

                        <!-- N√≠vel 2 -->
                        <div class="mapa-node bloqueado" id="node-2" onclick="Navigation.SelecionarFaseMapa(2)">
                            <div class="node-icon">‚Ö°</div>
                            <div class="node-tooltip">Cap. 2: Igvuld</div>
                        </div>

                        <div class="mapa-link"></div>

                        <!-- N√≠vel 3 -->
                        <div class="mapa-node bloqueado" id="node-3" onclick="Navigation.SelecionarFaseMapa(3)">
                            <div class="node-icon">‚Ö¢</div>
                            <div class="node-tooltip">Cap. 3: Lacaios</div>
                        </div>

                        <div class="mapa-link"></div>

                        <!-- N√≠vel 4 -->
                        <div class="mapa-node bloqueado" id="node-4" onclick="Navigation.SelecionarFaseMapa(4)">
                            <div class="node-icon">‚Ö£</div>
                            <div class="node-tooltip">Cap. 4: Zirgur</div>
                        </div>

                        <div class="mapa-link"></div>

                        <!-- N√≠vel 5 -->
                        <div class="mapa-node bloqueado" id="node-5" onclick="Navigation.SelecionarFaseMapa(5)">
                            <div class="node-icon">‚Ö§</div>
                            <div class="node-tooltip">Cap. 5: O Port√£o</div>
                        </div>

                        <div class="mapa-link"></div>

                        <!-- N√≠vel 6 -->
                        <div class="mapa-node bloqueado" id="node-6" onclick="Navigation.SelecionarFaseMapa(6)">
                            <div class="node-icon">‚Ö•</div>
                            <div class="node-tooltip">Cap. 6: Durotan</div>
                        </div>

                        <div class="mapa-link"></div>

                        <!-- N√≠vel 7 -->
                        <div class="mapa-node bloqueado" id="node-7" onclick="Navigation.SelecionarFaseMapa(7)">
                            <div class="node-icon">‚Ö¶</div>
                            <div class="node-tooltip">Cap. 7: Gromn</div>
                        </div>
                    </div>
                </div>
            </div>
            <button class="botao-medieval btn-voltar-mapa" onclick="UI.TrocarTela('tela-campanha')">Voltar</button>
        </section>

        <!-- Tela de Narrativa/Hist√≥ria (Estilo Livro) -->
        <section id="tela-historia" class="tela oculta">
            <div class="livro-container">
                <div class="pagina-esquerda">
                    <h2 id="historia-titulo" class="titulo-capitulo">Cap√≠tulo I</h2>
                    <h3 id="historia-subtitulo" class="subtitulo-capitulo">O Castelo de Igvuld</h3>
                    <div class="separador-livro">‚ù¶</div>
                    <p id="historia-texto" class="texto-livro">
                        Lorem ipsum dolor sit amet...
                    </p>
                </div>
                <button id="btn-iniciar-historia" class="botao-livro">Virar P√°gina</button>
            </div>
        </section>

        <!-- Tela de Di√°logo Pr√©-Combate -->
        <section id="tela-dialogo-combate" class="tela oculta">
            <div class="dialogo-combate-container">
                <!-- Personagem Jogador (Esquerda) -->
                <div class="personagem-dialogo jogador-dialogo" id="personagem-jogador-dialogo">
                    <div class="avatar-dialogo" id="avatar-jogador-dialogo"></div>
                    <div class="balao-fala balao-jogador oculta" id="balao-jogador">
                        <div class="texto-balao"></div>
                        <div class="seta-balao"></div>
                    </div>
                </div>

                <!-- Divisor VS -->
                <div class="vs-dialogo">VS</div>

                <!-- Personagem Inimigo (Direita) -->
                <div class="personagem-dialogo inimigo-dialogo" id="personagem-inimigo-dialogo">
                    <div class="avatar-dialogo" id="avatar-inimigo-dialogo"></div>
                    <div class="balao-fala balao-inimigo oculta" id="balao-inimigo">
                        <div class="texto-balao"></div>
                        <div class="seta-balao"></div>
                    </div>
                </div>
            </div>

            <!-- Controles de Di√°logo -->
            <div class="controles-dialogo-bottom">
                <button class="botao-dialogo" id="btn-pular-dialogo">Pular Di√°logo</button>
                <button class="botao-dialogo botao-principal" id="btn-proximo-dialogo">Continuar</button>
            </div>
        </section>

        <!-- Tela de Vit√≥ria Comemorativa -->
        <section id="tela-vitoria" class="tela-especial oculta">
            <div class="vitoria-content">
                <h1 class="vitoria-titulo">Triunfo!</h1>
                <div class="vitoria-decoracao">‚öîÔ∏è</div>
                <p class="vitoria-subtitulo">O inimigo caiu, a justi√ßa prevalece.</p>
                <div class="vitoria-recompensas" id="vitoria-resumo">
                    <!-- Preenchido via JS -->
                </div>
                <button class="botao-brilho" id="btn-vitoria-continuar">Continuar Jornada</button>
            </div>
            <div id="particulas-vitoria"></div>
        </section>

        <!-- Menu de Talentos/Habilidades -->
        <section id="menu-talentos" class="tela-especial oculta">
            <div class="vitoria-content">
                <h2 class="vitoria-titulo" style="font-size: 3.5rem;">Aprimorar Talentos</h2>
                <p class="vitoria-subtitulo">Pontos dispon√≠veis: <span id="pontos-talento-valor">0</span></p>
                <div class="talentos-grid" id="grid-talentos">
                    <!-- Cards de talentos sorteados via JS -->
                </div>
                <p class="instrucao-talento">Escolha sabiamente para fortalecer seu her√≥i.</p>
            </div>
        </section>


        <!-- Tela de Jogo -->
        <section id="tela-jogo" class="tela oculta">
            <!-- Bot√£o de Configura√ß√µes (Apenas no Jogo/Combate) -->
            <button id="btn-config" class="btn-config-fixo" onclick="AbrirMenuConfig()">‚öôÔ∏è</button>

            <!-- Overlay de Di√°logo -->
            <div id="overlay-dialogo" class="oculta">
                <div class="caixa-dialogo">
                    <div class="personagem-dialogo-container">
                        <img id="img-personagem-dialogo" src="" alt="Personagem">
                        <div class="nome-dialogo" id="nome-personagem-dialogo"></div>
                    </div>
                    <div class="texto-dialogo-container">
                        <p id="texto-dialogo"></p>
                    </div>
                    <div class="controles-dialogo">
                        <button id="botao-avancar-dialogo" class="botao-acao">Continuar</button>
                    </div>
                </div>
            </div>

            <!-- Interface Principal Superior (HUDs e Arena) -->
            <div class="layout-combate">
                <!-- Status do Jogador (Esquerda) -->
                <div class="status-jogador painel-lateral esquerda">
                    <div class="nome-hud-container">
                        <h3 class="nome-hud text-truncate">Cavaleiros</h3>
                        <button class="botao-info-stats" data-alvo="jogador">‚ñ∂</button>
                    </div>
                    <!-- Container de Efeitos -->
                    <div id="efeitos-jogador" class="efeitos-ativos-hud"></div>

                    <!-- Barras (Primeiro) -->
                    <div class="recipiente-barra-status">
                        <div class="rotulo-status">
                            Vida
                            <span id="indicador-dano-jogador" class="indicador-flutuante"></span>
                            <span class="valor-status" id="texto-vida-jogador">100/100</span>
                        </div>
                        <div class="barra-status vida">
                            <div class="preenchimento-barra" id="barra-vida-jogador" style="width: 100%;"></div>
                        </div>
                    </div>
                    <div class="recipiente-barra-status">
                        <div class="rotulo-status">Energia <span class="valor-status"
                                id="texto-energia-jogador">50/50</span></div>
                        <div class="barra-status energia">
                            <div class="preenchimento-barra" id="barra-energia-jogador" style="width: 100%;"></div>
                        </div>
                    </div>
                    <div class="recipiente-barra-status">
                        <div class="rotulo-status">Mana <span class="valor-status" id="texto-mana-jogador">30/30</span>
                        </div>
                        <div class="barra-status mana">
                            <div class="preenchimento-barra" id="barra-mana-jogador" style="width: 100%;"></div>
                        </div>
                    </div>

                    <!-- Novo Grid de Atributos -->
                    <div class="grid-atributos">
                        <div class="card-atributo" id="card-ataque-jogador">
                            <span class="icone-atrib">‚öîÔ∏è</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib" id="label-ataque-jogador">ATK</span>
                                <div class="valores-atrib">
                                    <span class="valor-base" id="atk-jogador-base">--</span>
                                    <span class="valor-atual" id="atk-jogador">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-atributo">
                            <span class="icone-atrib">üõ°Ô∏è</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib">DEF</span>
                                <div class="valores-atrib">
                                    <span class="valor-atual" id="def-jogador">--</span>
                                    <span class="valor-extra" id="def-jogador-pct">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-atributo">
                            <span class="icone-atrib">üí™</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib">VIG</span>
                                <div class="valores-atrib">
                                    <span class="valor-atual" id="vigor-jogador">--</span>
                                    <span class="valor-extra" id="vigor-jogador-pct">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-atributo">
                            <span class="icone-atrib">ü©∏</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib">ROUBO</span>
                                <div class="valores-atrib">
                                    <span class="valor-atual" id="roubo-jogador">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-atributo">
                            <span class="icone-atrib">üéØ</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib">CRIT</span>
                                <div class="valores-atrib">
                                    <span class="valor-atual" id="crit-jogador">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-atributo" id="card-pen-jogador">
                            <span class="icone-atrib">üóùÔ∏è</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib" id="label-pen-jogador">PEN</span>
                                <div class="valores-atrib">
                                    <span class="valor-atual" id="pen-jogador-abs">--</span>
                                    <span class="valor-extra" id="pen-jogador-pct">--</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Caixa de Determina√ß√£o Exclusiva -->
                    <div class="caixa-determinacao">
                        <div class="det-header">
                            <span class="icone-atrib">‚ú®</span>
                            <span class="label-atrib">DETERMINA√á√ÉO</span>
                        </div>
                        <div class="det-valor-container">
                            <span id="det-jogador">--</span>
                            <span class="det-max">/ <span id="det-max-jogador">200</span></span>
                        </div>
                    </div>
                </div>

                <!-- Arena (Centro) -->
                <div class="arena">
                    <div class="time time-jogadores">
                        <div class="personagem-container">
                            <div class="personagem jogador lateral" id="jogador-2">
                                <div class="visual-personagem visual-jogador">
                                    <div class="indicador-flutuante" id="indicador-dano-jogador-2"></div>
                                </div>
                                <div class="nome-personagem">Aliado 1</div>
                            </div>
                            <div class="personagem jogador principal" id="jogador-1">
                                <div class="visual-personagem visual-jogador">
                                    <div class="indicador-flutuante" id="indicador-dano-jogador-1"></div>
                                </div>
                                <div class="nome-personagem">Voc√™</div>
                            </div>
                            <div class="personagem jogador lateral" id="jogador-3">
                                <div class="visual-personagem visual-jogador">
                                    <div class="indicador-flutuante" id="indicador-dano-jogador-3"></div>
                                </div>
                                <div class="nome-personagem">Aliado 2</div>
                            </div>
                        </div>
                    </div>

                    <div class="divisor-versus">VS</div>

                    <div class="time time-inimigos">
                        <div class="personagem-container">
                            <div class="personagem inimigo lateral" id="inimigo-2">
                                <div class="visual-personagem visual-inimigo">
                                    <div class="indicador-flutuante" id="indicador-dano-inimigo-2"></div>
                                </div>
                                <div class="nome-personagem">Inimigo 2</div>
                            </div>
                            <div class="personagem inimigo principal" id="inimigo-1">
                                <div class="visual-personagem visual-inimigo">
                                    <div class="indicador-flutuante" id="indicador-dano-inimigo-1"></div>
                                </div>
                                <div class="nome-personagem">Inimigo Principal</div>
                            </div>
                            <div class="personagem inimigo lateral" id="inimigo-3">
                                <div class="visual-personagem visual-inimigo">
                                    <div class="indicador-flutuante" id="indicador-dano-inimigo-3"></div>
                                </div>
                                <div class="nome-personagem">Inimigo 3</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Status do Inimigo (Direita) -->
                <div class="status-inimigo painel-lateral direita" id="status-inimigo">
                    <div class="nome-hud-container">
                        <button class="botao-info-stats" data-alvo="inimigo">‚óÄ</button>
                        <h3 class="nome-hud text-truncate" id="nome-inimigo-hud">Inimigo</h3>
                    </div>
                    <!-- Container de Efeitos -->
                    <div id="efeitos-inimigo" class="efeitos-ativos-hud"></div>

                    <!-- Barras (Primeiro) -->
                    <div class="recipiente-barra-status">
                        <div class="rotulo-status">
                            Vida
                            <span id="indicador-dano-inimigo" class="indicador-flutuante"></span>
                            <span class="valor-status" id="texto-vida-inimigo">100/100</span>
                        </div>
                        <div class="barra-status vida">
                            <div class="preenchimento-barra" id="barra-vida-inimigo" style="width: 100%;"></div>
                        </div>
                    </div>
                    <div class="recipiente-barra-status">
                        <div class="rotulo-status">Energia <span class="valor-status"
                                id="texto-energia-inimigo">50/50</span></div>
                        <div class="barra-status energia">
                            <div class="preenchimento-barra" id="barra-energia-inimigo" style="width: 100%;"></div>
                        </div>
                    </div>
                    <div class="recipiente-barra-status">
                        <div class="rotulo-status">Mana <span class="valor-status" id="texto-mana-inimigo">30/30</span>
                        </div>
                        <div class="barra-status mana">
                            <div class="preenchimento-barra" id="barra-mana-inimigo" style="width: 100%;"></div>
                        </div>
                    </div>

                    <!-- Novo Grid de Atributos Inimigo -->
                    <div class="grid-atributos">
                        <div class="card-atributo">
                            <span class="icone-atrib">‚öîÔ∏è</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib">ATK</span>
                                <div class="valores-atrib">
                                    <span class="valor-atual" id="atk-inimigo">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-atributo">
                            <span class="icone-atrib">üõ°Ô∏è</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib">DEF</span>
                                <div class="valores-atrib">
                                    <span id="def-inimigo">--</span>
                                    <span class="valor-extra" id="def-inimigo-pct">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-atributo">
                            <span class="icone-atrib">üí™</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib">VIG</span>
                                <div class="valores-atrib">
                                    <span id="vigor-inimigo">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-atributo">
                            <span class="icone-atrib">ü©∏</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib">ROUBO</span>
                                <div class="valores-atrib">
                                    <span id="roubo-inimigo">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-atributo">
                            <span class="icone-atrib">üéØ</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib">CRIT</span>
                                <div class="valores-atrib">
                                    <span id="crit-inimigo">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-atributo">
                            <span class="icone-atrib">üóùÔ∏è</span>
                            <div class="corpo-atrib">
                                <span class="label-atrib">PEN</span>
                                <div class="valores-atrib">
                                    <span id="pen-inimigo-abs">--</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="caixa-determinacao">
                        <div class="det-header">
                            <span class="icone-atrib">‚ú®</span>
                            <span class="label-atrib">DETERMINA√á√ÉO</span>
                        </div>
                        <div class="det-valor-container">
                            <span id="det-inimigo">--</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="controles">
                <button class="botao-acao atacar" data-acao="atacar">Atacar</button>
                <button class="botao-acao habilidade" data-acao="habilidade">Habilidades</button>
                <button class="botao-acao descansar" data-acao="passar-turno">Passar Turno</button>
                <button class="botao-acao mochila" data-acao="mochila">Mochila</button>
            </div>

            <!-- Sele√ß√£o de Cartas (Sub-menu de Ataque) -->
            <div id="container-cartas" class="oculta">
                <div class="cartas-wrapper">
                    <!-- As cartas ser√£o geradas via JS aqui -->
                </div>
                <button class="botao-acao" onclick="FecharMenuAtaque()">Voltar</button>
            </div>

            <!-- Display de Mensagens Centralizado -->
            <div id="display-mensagens" class="display-mensagens oculta">
                <p id="texto-mensagem"></p>
            </div>
        </section>
    </main>

    <!-- Modais (Fora do main para evitar conflitos de posicionamento) -->

    <!-- Modal de Atributos Detalhados -->
    <div id="modal-atributos" class="modal-overlay oculta">
        <div class="modal-conteudo modal-pequeno">
            <div class="modal-header">
                <h2 id="titulo-modal-atributos">Atributos</h2>
                <button class="botao-fechar" onclick="FecharDetalhesAtributos()">&times;</button>
            </div>
            <div class="modal-body-atributos">
                <div id="imagem-atributo-destaque" class="imagem-atributo-destaque"></div>
                <div id="lista-atributos-detalhada" class="grid-atributos-detalhada">
                    <!-- Preenchido via JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal do Baralho -->
    <div id="modal-baralho" class="modal-overlay oculta">
        <div class="modal-conteudo">
            <div class="modal-header">
                <h2>Seu Baralho (20 Cartas)</h2>
                <button class="botao-fechar" onclick="FecharModalBaralho()">&times;</button>
            </div>
            <div id="deck-grid" class="deck-grid">
                <!-- Cartas em miniatura aqui -->
            </div>
        </div>
    </div>

    <!-- Modal de Configura√ß√µes -->
    <div id="modal-config" class="modal-overlay oculta">
        <div class="modal-conteudo modal-pequeno">
            <div class="modal-header">
                <h2>Configura√ß√µes</h2>
                <button class="botao-fechar" onclick="FecharMenuConfig()">&times;</button>
            </div>
            <div class="menu-config-lista">
                <button class="btn-config-item" onclick="FecharMenuConfig()">Retomar Jogo</button>
                <button class="btn-config-item" onclick="AbrirBaralhoViaConfig()">Mostrar Baralho</button>
                <button class="btn-config-item btn-perigo" onclick="MenuDesistir()">Desistir</button>
                <button class="btn-config-item" id="btn-audio-toggle" onclick="ToggleAudio()">Desabilitar
                    √Åudio</button>
                <button class="btn-config-item btn-sair" onclick="FecharPrograma()">Fechar Programa</button>
            </div>
        </div>
    </div>

    <script src="dados.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/state.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/effects.js"></script>
    <script src="js/targeting.js"></script>
    <script src="js/dialogo.js"></script>
    <script src="js/combat.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/config.js"></script>
    <script src="js/main.js"></script>
</body>

</html>